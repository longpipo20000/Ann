-- ==============================================================================
--                     REALISTIC FAKE BAN SCREEN
-- ==============================================================================
-- Tác giả: Andeptrai
-- Mô tả: Tạo màn hình thông báo bị ban giả mạo giống hệt của Roblox.

local Players = game:GetService("Players")
local CoreGui = game:GetService("CoreGui")
local Lighting = game:GetService("Lighting")
local UserInputService = game:GetService("UserInputService")
local GuiService = game:GetService("GuiService")

local LocalPlayer = Players.LocalPlayer

-- Xóa GUI cũ nếu có
if CoreGui:FindFirstChild("RobloxPromptGui") then
    CoreGui.RobloxPromptGui:Destroy()
end
if Lighting:FindFirstChild("RobloxBlur") then
    Lighting.RobloxBlur:Destroy()
end

-- 1. HIỆU ỨNG MỜ (BLUR)
local Blur = Instance.new("BlurEffect")
Blur.Name = "RobloxBlur"
Blur.Size = 24 -- Độ mờ chuẩn của Roblox
Blur.Parent = Lighting

-- 2. TẠO GUI CHÍNH
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "RobloxPromptGui"
ScreenGui.IgnoreGuiInset = true -- Che phủ cả thanh topbar
ScreenGui.DisplayOrder = 1000 -- Đảm bảo hiện trên cùng
ScreenGui.Parent = CoreGui

-- Màn hình nền tối
local Background = Instance.new("Frame")
Background.Name = "Background"
Background.Size = UDim2.new(1, 0, 1, 0)
Background.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
Background.BackgroundTransparency = 0.5 -- Độ trong suốt chuẩn
Background.Parent = ScreenGui

-- Khung chứa thông báo
local DialogFrame = Instance.new("Frame")
DialogFrame.Name = "DialogFrame"
DialogFrame.Size = UDim2.new(0, 400, 0, 200) -- Kích thước chuẩn
DialogFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
DialogFrame.AnchorPoint = Vector2.new(0.5, 0.5)
DialogFrame.BackgroundColor3 = Color3.fromRGB(57, 59, 61) -- Màu xám Roblox
DialogFrame.BorderSizePixel = 0
Instance.new("UICorner", DialogFrame).CornerRadius = UDim.new(0, 12) -- Bo góc chuẩn
DialogFrame.Parent = ScreenGui

-- Tiêu đề (Disconnected)
local Title = Instance.new("TextLabel")
Title.Name = "Title"
Title.Text = "Disconnected"
Title.Size = UDim2.new(1, -40, 0, 40)
Title.Position = UDim2.new(0, 20, 0, 15)
Title.BackgroundTransparency = 1
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.Font = Enum.Font.SourceSansBold -- Font chuẩn tiêu đề
Title.TextSize = 24
Title.TextXAlignment = Enum.TextXAlignment.Left
Title.Parent = DialogFrame

-- Nội dung thông báo (Lý do Ban)
local Message = Instance.new("TextLabel")
Message.Name = "Message"
-- Nội dung giống thật nhất
Message.Text = "You were kicked from this experience: Exploiting is not allowed.\n\n(Error Code: 267)"
Message.Size = UDim2.new(1, -40, 0, 80)
Message.Position = UDim2.new(0, 20, 0, 60)
Message.BackgroundTransparency = 1
Message.TextColor3 = Color3.fromRGB(189, 190, 190) -- Màu chữ nội dung chuẩn
Message.Font = Enum.Font.SourceSans -- Font chuẩn nội dung
Message.TextSize = 18
Message.TextWrapped = true
Message.TextXAlignment = Enum.TextXAlignment.Left
Message.TextYAlignment = Enum.TextYAlignment.Top
Message.Parent = DialogFrame

-- Nút bấm (Leave)
local LeaveButton = Instance.new("TextButton")
LeaveButton.Name = "LeaveButton"
LeaveButton.Text = "Leave"
LeaveButton.Size = UDim2.new(1, -40, 0, 40)
LeaveButton.Position = UDim2.new(0, 20, 1, -60)
LeaveButton.BackgroundColor3 = Color3.fromRGB(255, 255, 255) -- Màu nền nút
LeaveButton.TextColor3 = Color3.fromRGB(57, 59, 61) -- Màu chữ nút
LeaveButton.Font = Enum.Font.SourceSansBold
LeaveButton.TextSize = 20
Instance.new("UICorner", LeaveButton).CornerRadius = UDim.new(0, 8)
LeaveButton.Parent = DialogFrame

-- 3. CHỨC NĂNG HOẠT ĐỘNG
-- Đóng băng nhân vật
if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
    LocalPlayer.Character.HumanoidRootPart.Anchored = true
end

-- Ẩn các GUI khác của game để tăng độ thật
for _, gui in pairs(LocalPlayer.PlayerGui:GetChildren()) do
    if gui:IsA("ScreenGui") then gui.Enabled = false end
end
GuiService.TopbarInset = Rect.new(0,0,0,0) -- Ẩn topbar nếu có thể

-- Xử lý khi bấm nút "Leave"
LeaveButton.MouseButton1Click:Connect(function()
    -- TROLL CỰC MẠNH: Kick thật với lý do y hệt
    LocalPlayer:Kick("Exploiting is not allowed. (Error Code: 267)")
end)

-- Phím tắt bí mật để gỡ (Delete) - Dành cho người test
UserInputService.InputBegan:Connect(function(input, gp)
    if input.KeyCode == Enum.KeyCode.Delete then
        ScreenGui:Destroy()
        Blur:Destroy()
        if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
            LocalPlayer.Character.HumanoidRootPart.Anchored = false
        end
        -- Hiện lại GUI của game
        for _, gui in pairs(LocalPlayer.PlayerGui:GetChildren()) do
            if gui:IsA("ScreenGui") then gui.Enabled = true end
        end
    end
end)
